<!DOCTYPE html>
<!-- saved from url=(0049)http://www.lvtao.net/tool/mysql_one_file_bak.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-type" content="text/html">
    <meta name="author" content="memory">
    <meta charset="utf-8">
    <meta name="description" content="功能介绍: 1.支持MySQL数据按指定大小分卷备份和恢复; 2.支持utf8gb2312两种版本 3.单文件超精简 4.备份成php文件,直接上传到服务器恢复 5.支持设置分卷大小 单文件版本(注,内含utf8和g...">
    <meta name="keywords" content=",php,mysql">
    <title>PHP单文件版MySQL超大数据库分卷备份恢复工具 - 吕滔博客</title>
    <meta name="title" content="PHP单文件版MySQL超大数据库分卷备份恢复工具 - 吕滔博客">
    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.lvtao.net/xmlrpc.php?rsd">
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.lvtao.net/wlwmanifest.xml">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://www.lvtao.net/rss.php">
    <link href="./PHP单文件版MySQL超大数据库分卷备份恢复工具_files/main.css" rel="stylesheet" type="text/css">
    <script src="./PHP单文件版MySQL超大数据库分卷备份恢复工具_files/common_tpl.js" type="text/javascript"></script>
    </head>
<body>
<header>
<div id="topnav">
    <span>2015年03月26日 星期四</span>
    <p><a href="http://www.lvtao.net/about_lvtao.html">关于滔哥</a><a href="http://www.lvtao.net/service.html">系统运维</a><a href="http://www.lvtao.net/lvtao_work.html">网站建设</a><a href="http://www.lvtao.net/tool/" target="_blank">在线工具</a><a href="http://www.lvtao.net/apple-devices.html">Apple设备</a><a href="http://medoo.lvtao.net/" target="_blank" title="medoo php 轻量级的数据库框架">MEDOO</a><a href="http://d.lvtao.net/" target="_blank">常用软件</a><a href="http://www.lvtao.net/rss.php">订阅RSS</a></p>
</div>
<div id="wrap">
    <div class="main" id="header">
        <h1><a href="http://www.lvtao.net/">吕滔博客</a></h1>
        <p>专注于互联网WEB应用和移动APP应用开发技术与研究的分享博客</p>
    </div>
</div>
<div id="nav">
    <div id="wrap">
        <nav>
            <ul>
            <li><a href="http://www.lvtao.net/">首页</a></li>
            <li><a href="http://www.lvtao.net/sort/web">前端设计</a></li>
            <li><a href="http://www.lvtao.net/sort/dev">WEB开发</a></li>
            <li><a href="http://www.lvtao.net/sort/database">数据库</a></li>
            <li><a href="http://www.lvtao.net/sort/server">服务器</a></li>
            <li><a href="http://www.lvtao.net/sort/c">C</a></li>
            <li><a href="http://www.lvtao.net/sort/ios">IOS</a></li>
            <li><a href="http://www.lvtao.net/sort/shell">SHELL</a></li>
            <li><a href="http://www.lvtao.net/sort/tool">工具源码</a></li>
        </ul>
        </nav>
        <div class="search">
            <form name="keyform" method="get" action="http://www.lvtao.net/index.php">
               <input name="keyword" class="search" type="text">
            </form>
        </div>
    </div>
</div>
</header>
<div id="wrap"><section>
<div class="container">
        <dl>
            <article>
            <h2 id="title_article" class="title_article">PHP单文件版MySQL超大数据库分卷备份恢复工具</h2>
            <div class="share_article">作者：<a href="http://www.lvtao.net/author/1" title=" memory@lvtao.net">Memory</a> 发布于：2013-6-9 20:57 Sunday 
            <a href="http://www.lvtao.net/sort/tool">工具源码</a>
     </div>
            <div class="content">功能介绍:<br>
1.支持MySQL数据按指定大小分卷备份和恢复;&nbsp;<br>
2.支持utf8&nbsp;gb2312两种版本<br>
3.单文件超精简<br>
4.备份成php文件,直接上传到服务器恢复<br>
5.支持设置分卷大小<br>
<p>
	单文件版本(注,内含&nbsp;utf8&nbsp;和gb2312两个版本,请根据数据库编码自行选择)&nbsp;
</p>
<p>
	<img src="./PHP单文件版MySQL超大数据库分卷备份恢复工具_files/cb1c4e674680b1a1e6fe03207557acb320130609130103.png" style="border:1px solid #EEEEEE;"> <img src="./PHP单文件版MySQL超大数据库分卷备份恢复工具_files/e79f5b7f1b5d160bc03da5e26186bef820130609130103.png" style="border:1px solid #EEEEEE;"><img src="./PHP单文件版MySQL超大数据库分卷备份恢复工具_files/0aea031048b94672e631386c645d2d6c20130609130103.png" style="border:1px solid #EEEEEE;"> 
</p>
<p>
</p><pre class="prettyprint lang-php linenums">&lt;?PHP
//配置部分： 
//注意，如果您没有在后面的注释的地方加上管理员身份验证程序，
//请不要配置正确的数据库用户名和密码！
//采用默认配置运行，程序会给出表单你填写的。

$db_host="localhost";    //数据库服务器
$db_username="root";     //数据库用户名
$db_password="";         //数据库密码
$db_dbname="";          //选择的数据库


//兼容低版本PHP
function requestValues(){
	return ' if(!isset($_POST)){ $_POST = $HTTP_POST_VARS; $_GET = $HTTP_GET_VARS; $_SERVER = $HTTP_SERVER_VARS;} ';
}

eval(requestValues());

$_POST["frametopheight"]=90;  //FrameTop 的高

define("VERSION","4.0"); //版本

error_reporting(1);
@set_time_limit(0);

function num_bitunit($num){
  $bitunit=array(' B',' KB',' MB',' GB');
  for($key=0;$key&lt;count($bitunit);$key++){
	if($num&gt;=pow(2,10*$key)-1){ //1023B 会显示为 1KB
	  $num_bitunit_str=(ceil($num/pow(2,10*$key)*100)/100)." $bitunit[$key]";
	}
  }
  return $num_bitunit_str;
}

//frame 分开标题
function frameset_html(){
	global $_POST;
	return "if(!\$_GET[framename]){
		echo \"&lt;html&gt;
		&lt;head&gt; &lt;meta http-equiv='Content-Type' content='text/html; charset=utf-8'&gt;
		&lt;title&gt;MySQL自导入数据库备份程序&lt;/title&gt;
		&lt;/head&gt;
		&lt;frameset rows='*,0' frameborder='NO' border='0' framespacing='0' name='myframeset'&gt;
			&lt;frame src='\$_SERVER[PHP_SELF]?\$_SERVER[QUERY_STRING]&amp;framename=main' name='mainFrame1'&gt;
			&lt;frame src='about:blank' name='mainFrame2'&gt;  
		&lt;/frameset&gt;
		&lt;BODY&gt;&lt;/BODY&gt;
		&lt;/html&gt;\";
		exit;
	}";
}

function postvars_function(){
	return '
	function fsql_StrCode($string,$action="ENCODE"){
		global $_SERVER;
		if($string=="") return "";
		if($action=="ENCODE") $md5code=substr(md5($string),8,10);
		else{
			$md5code=substr($string,-10); 
			$string=substr($string,0,strlen($string)-10); 
		}
		$key = md5($md5code.$_SERVER["HTTP_USER_AGENT"].filemtime($_SERVER["SCRIPT_FILENAME"]));
		$string = ($action=="ENCODE"?$string:base64_decode($string));
		$len = strlen($key);
		$code = "";
		for($i=0; $i&lt;strlen($string); $i++){
			$k = $i%$len;
			$code .= $string[$i]^$key[$k];
		}
		$code = ($action == "DECODE" ? (substr(md5($code),8,10)==$md5code?$code:NULL) : base64_encode($code)."$md5code");
		return $code;
	}
	if($_POST[faisunsql_postvars]){
		if($faisunsql_postvars=unserialize(fsql_StrCode($_POST[faisunsql_postvars],"DECODE"))){
			foreach($faisunsql_postvars as $key=&gt;$value){
				if(!isset($_POST[$key])) $_POST[$key] = $value;
			}
		}else{ die("&lt;script language=\'JavaScript\'&gt;alert(\'由于文档更改,提交信息已丢失,需要重新开始.\');&lt;/script&gt;"); }
		unset($_POST[faisunsql_postvars],$faisunsql_postvars,$key,$value);
	}';	
}

eval(frameset_html().postvars_function());

if($_POST["totalsize"]){
	$totalsize_chunk=num_bitunit($_POST["totalsize"]);
}

//css 样式定义
function csssetting(){
  return "&lt;style type='text/css'&gt;
	&lt;!--
	body, td, input, a{color:#985b00;font-family: '宋体';font-size: 9pt;}
	body, td, a{line-height:180%;}
	.tabletitle{color:#FFFFFF;background-color:#FF6600;}
	.tabledata{background-color:#FFEECC;}
	.tabledata_on{background-color:#FFFFCC;}	
	input, .borderdiv {border:1px inset;}
	--&gt;
	&lt;/style&gt;";
}

//各页相同的页面头
function fheader(){
	global $_POST;
	$str = fsql_StrCode(serialize($_POST),"ENCODE");
	echo "&lt;html&gt;
	&lt;head&gt; 
	&lt;meta http-equiv='Content-Type' content='text/html; charset=utf-8'&gt;
	&lt;title&gt;MySQL自导入数据库备份程序&lt;/title&gt;
	".csssetting()."
	&lt;/head&gt;&lt;body link='#0000FF' vlink='#0000FF' alink='#0000FF' bgcolor='#FFFFFF'&gt;
	&lt;center&gt;&lt;script language='Javascript'&gt;document.doshowmywin=1;&lt;/script&gt;
	&lt;form name='myform' method='post' action=''&gt;&lt;input type='hidden' name='faisunsql_postvars' value='".$str."'&gt;";
}

function showmywin_script(){
	global $_POST;
	return "&lt;script language='Javascript'&gt;
	function showmywin(){
		if(!document.doshowmywin) return;
		if(top.myframeset&amp;&amp;this.window.name=='mainFrame1'){
			top.myframeset.rows='$_POST[frametopheight],*,0';
		}
		if(top.myframeset&amp;&amp;this.window.name=='mainFrame2'){
			top.myframeset.rows='$_POST[frametopheight],0,*';
		}
	}
	document.body.onload=showmywin;
	&lt;/script&gt;";
}

//各页相同的页面尾
function ffooter(){
	echo "&lt;div id='pageendTag'&gt;&lt;/div&gt;&lt;/form&gt;
	&lt;a href='http://www.hbwanghai.com' target='_blank'&gt;河北网海科技空间域名注册&lt;/a&gt;&lt;br&gt;
	免费程序 欢迎宣传、发布&lt;br&gt;
	&lt;/center&gt;".showmywin_script()."&lt;/body&gt;&lt;/html&gt;";
}

//开始说明表格
function tabletext($ttext="",$twidth=400){
	return "&lt;table width='$twidth' border='0' cellspacing='1' cellpadding='3' align=center&gt;&lt;tr&gt;&lt;td&gt;$ttext&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;br&gt;\r\n";
}

//开始一个表格
function tablestart($ttitle="",$twidth=400){
	return "&lt;table width='1' border='0' cellspacing='0' cellpadding='0' align=center class='tabletitle'&gt;
	&lt;tr&gt;&lt;td class='tabletitle'&gt;&lt;strong&gt;&amp;nbsp;$ttitle&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;
	&lt;table width='$twidth' border='0' cellspacing='1' cellpadding='2' align=center&gt;";
}

//插入数据到表格
function tabledata($data,$widths=""){
	$pdata=explode("|",$data);
	$pwidths=explode("|",$widths);
	$str="&lt;tr class='tabledata' onmouseover='this.className=\"tabledata_on\";' onmouseout='this.className=\"tabledata\";'&gt;\r\n";
	for(@reset($pdata);@list($key,$val)=@each($pdata);){
		$str.="\t&lt;td style='padding-left:4px' ".(intval($pwidths[$key])?"width='$pwidths[$key]'":"")." nowrap&gt;$pdata[$key]&lt;/td&gt;\r\n";
	}
	$str.="&lt;/tr&gt;\r\n";
	return $str;
}

//结束一个表格
function tableend(){
	return "&lt;/table&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;BR&gt;\r\n";
}

//按钮样式
function fbutton($type="submit",$name="Submit",$value="确定",$script="",$return=0){
	$str="&lt;input type='$type' name='$name' value='$value' class='tabletitle' style='border:3px double #FF6600' $script&gt; ";
	if($return) return $str;else echo $str;
}

//topFrame
if($_GET["action"]=="topframe"&amp;&amp;$_GET["framename"]=="topframe"){
	fheader();
	echo "&lt;/font&gt;&lt;/center&gt;&lt;/body&gt;&lt;/html&gt;";
	exit;
}


/* 
如果您在开头配置部分填写了正确的配置，
您可以在这里加上管理员身份验证，
并把下面声明常量的语句用在代码中：
define("IS_ADMIN","yes");  //用于检验是否加了管理员身份验证代码。
*/

if(!isset($_POST[dosubmit])){
	$_POST["db_host"]=$db_host;
	$_POST["db_username"]=$db_username;
	$_POST["db_password"]=$db_password;
	$_POST["db_dbname"]=$db_dbname;
}

// 配置表单
if(!@mysql_connect($_POST[db_host],$_POST[db_username],$_POST[db_password])||!@mysql_select_db($_POST[db_dbname])){
	fheader();
	if(isset($_POST['finByte']) and isset($_POST['db_dbname'])){
		echo "连接数据库超时,请&lt;a href='javascript:submitme();'&gt;刷新重试&lt;/a&gt;.&lt;font id='timeescapepls'&gt;10&lt;/font&gt;秒后将自动重试.&lt;BR&gt;也可能是配置不对,请检查您的配置.&lt;BR&gt;";
		echo "
		&lt;script language='JavaScript'&gt;
		document.doshowmywin=0;
		retryTime=10;
		function timeescape(){
			if(!retryTime) return;
			timeescapepls.innerHTML=retryTime--;
		}setInterval('timeescape()',1000);
		function submitme(){
			for(i=myform.elements.length-1;i&gt;=0;i--){if(myform.elements[i].name==\"action\")break;}
			myform.elements[i].value=\"databackup\";
			myform.submit();
		}
		setTimeout('submitme()',retryTime*1000);
		&lt;/script&gt;";
	}
	else if(isset($_POST[dosubmit])){
		echo "&lt;script language='JavaScript'&gt;alert('连接数据库错误,请检查您的配置.');&lt;/script&gt;";
	}
	echo tabletext("输入正确的配置以连接数据库。&lt;br&gt; 如果无法连接数据库，请联系您的主机管理员以获得正确配置值。");
	echo tablestart("请检查您的配置");
	echo tabledata("服务器主机：|&lt;input name='db_host' value='$_POST[db_host]' type='text'&gt;");
	echo tabledata("要导出的数据库：|&lt;input name='db_dbname' value='$_POST[db_dbname]' type='text'&gt;");
	echo tabledata("数据库用户名：|&lt;input name='db_username' value='$_POST[db_username]' type='text'&gt;");
	echo tabledata("数据库密码：|&lt;input name='db_password' value='$_POST[db_password]' type='password'&gt;");
	echo tableend();
	fbutton('submit','dosubmit','连接');
	fbutton('reset','doreset','重置');
	ffooter();
	exit;
}
mysql_query("SET NAMES utf8;");

if(!defined("IS_ADMIN") and !isset($_POST['db_dbname'])){die("您在程序开头部分填写了正确的配置，但没有加上任何管理员身份验证代码。为了安全，请不要配置正确的数据库用户名和密码！");}

//选择要备份的数据表
if (!isset($_POST['action'])){
	$currow=mysql_fetch_array(mysql_query("select version() as v"));
	$_POST['mysql_version']=$currow['v'];
	fheader();
	echo tabletext("以下列出的是该数据库中所有的数据表。&lt;br&gt;默认情况下全部导出，您也可以选择只导出其中一部分表。",500);
	echo tablestart("请选择要备份的数据表 &amp;nbsp; (当前数据库版本: $_POST[mysql_version])",500);
	echo tabledata("&lt;center&gt;&lt;B&gt;&lt;a href='#' onclick='selrev();return false;'&gt;[反选]&lt;/a&gt;&lt;/B&gt;&lt;/center&gt;|&lt;strong&gt;表名&lt;/strong&gt;|&lt;strong&gt;注释&lt;/strong&gt;|&lt;strong&gt;记录数&lt;/strong&gt;|&lt;strong&gt;大小&lt;/strong&gt;","10%|30%|30%|17%|23%");
	$query=mysql_query("SHOW TABLE STATUS");
	while ($currow=mysql_fetch_array($query)){
		echo tabledata("&lt;center&gt;&lt;input name='fsqltable[{$currow[Name]}]' id='fsqltable_$currow[Name]' type='checkbox' value='".($currow[Data_length]+$currow[Index_length]).",".$currow[Avg_row_length]."' checked onclick='getsize()'&gt;&lt;/center&gt;|&lt;label for='fsqltable_$currow[Name]'&gt;$currow[Name]&lt;/label&gt;|$currow[Comment]|$currow[Rows]|".num_bitunit($currow[Data_length]+$currow[Index_length])."");
	}
	echo tabledata("&lt;center&gt;&lt;B&gt;&lt;a href='#' onclick='selrev();return false;'&gt;[反选]&lt;/a&gt;&lt;/B&gt;&lt;/center&gt;|&lt;B&gt;目前选择表的总大小：&lt;/B&gt;|&amp;nbsp;|&amp;nbsp;|&lt;B&gt;&lt;label id='totalsizetxt'&gt;&lt;/label&gt;&lt;/B&gt;");
	echo tableend();
	echo "&lt;script language='JavaScript'&gt;
	&lt;!--
	  function selrev() {
		with(myform) {
			for(i=0;i&lt;elements.length;i++) {
				thiselm = elements[i];
				if(thiselm.name.match(/fsqltable\[\w+\]/))
					thiselm.checked = !thiselm.checked;
			}
		}
		getsize();
	  }
	 	
	  function num_bitunit(num){
		 var bitunit=new Array(' B',' KB',' MB',' GB');
		 for(key=0;key&lt;bitunit.length;key++){
		   if(num&gt;=Math.pow(2,10*key)-1){ //1023B 会显示为 1KB
			  num_bitunit_str=(Math.ceil(num/Math.pow(2,10*key)*100)/100)+' '+bitunit[key];
		   }	 
		 }
		 return num_bitunit_str;
	  }
	
	  function getsize(){
		var ts=0;
		with(document.myform) {
			for(i=0;i&lt;elements.length;i++) {
				thiselm = elements[i];
				if(thiselm.name.match(/fsqltable\[\w+\]/))
					ts += parseInt(thiselm.value);
			}
			totalsizetxt.innerHTML=num_bitunit(ts);
		}
	  }
	  getsize();
	--&gt;
	&lt;/script&gt;
	&lt;input name='action' type='hidden' id='action' value='selecttype'&gt;";
	fbutton('submit','dosubmit','下一步');
	fbutton('reset','doreset','重置',"onmouseup=setTimeout('getsize()',100)");
	ffooter();
}

//选择导出方式
if($_POST['action']=="selecttype"){
	$_POST["totalsize"]=0;
	for(@reset($_POST[fsqltable]);count($_POST[fsqltable])&amp;&amp;@list($key,$val)=@each($_POST[fsqltable]);) {
		$_POST["totalsize"]+=$val;
	}
	fheader();
	$_POST["totalsize"]&gt;1024*1024 ? $partsaveck="checked" : $downloadck="checked";
	echo tabletext("选择导出单文件还是多文件：&lt;br&gt;
					数据库太大的话，建议选择多文件导出方式。&lt;br&gt;
					系统会根据所要导出数据量的大小，给出推荐的默认值，&lt;br&gt;
					如果您无法判断您的数据量大小，按默认选定即可。",500);
	echo tablestart("请选择导出方式",500);
	echo tabledata("导出方式：|&lt;br&gt;
					&lt;input name='back_type' value='download' type='radio' $downloadck&gt;生成单个文件并下载 (备份的数据量较大时不建议使用)&lt;br&gt;
					&lt;input name='back_type' value='partsave' type='radio' $partsaveck&gt;分为多个文件并保存在服务器 &lt;br&gt;&lt;br&gt;");
	echo tableend();
	echo "
	&lt;script language='JavaScript'&gt;
	function confirmit(){
		with(myform){
			if(back_type[0].checked &amp;&amp; ".intval($_POST["totalsize"])."&gt;1024*1024 &amp;&amp; !confirm(\"您要导出的数据量比较多（{$totalsize_chunk}），建议选择多文件导出方式。\\r\\n点击“确定”继续导出单文件，“取消”返回更改。\"))
				return false;
		}
		return true;
	}
	myform.onsubmit=new Function('return confirmit();');
	&lt;/script&gt;
	&lt;input name='action' type='hidden' id='action' value='selectoption'&gt;";
	fbutton('submit','dosubmit','下一步');
	fbutton('reset','doreset','重置');
	ffooter();
}


if($_POST['action']=="selectoption"){
	if($_POST['back_type']=="partsave"){//多文件保存选项
		fheader();
		echo tabletext("您选择了多文件导出方式，总数据量 $totalsize_chunk 字节。&lt;br&gt;&lt;br&gt;
						导出的文件将包括一个主文件和多个数据文件，都放在同一个目录下。&lt;br&gt;
						每个数据文件不宜过大，否则容易造成导出或导入超时；而设置得越小则导出的页数越多。&lt;br&gt;
						导入密码在数据库导入时和HTTP方式下载数据文件时使用，请务必牢记。",500);
		echo tablestart("保存选项：",500);
		echo tabledata("存放目录：|&lt;input name='dir' value='{$_POST[db_dbname]}data' type='text' size=20&gt;|相对本程序所在目录，必须有写入权限");
		echo tabledata("主文件名：|&lt;input name='filename' value='index' type='text' size=16&gt;.php|不含扩展名！");
		echo tabledata("生成文件格式：|&lt;input name='extension' value='php' type='radio' checked&gt;.php | 生成php文件可直接上传到新服务器恢复");
		echo tabledata("每个数据文件大小：|&lt;input name='filesize' value='1000' type='text' size=10&gt;|单位 KB，1 MB = 1024 KB");
		echo tabledata("导出一页时间间隔：|&lt;input name='nextpgtimeout' value='0' type='text' size=10&gt;|秒，若您的空间不支持频繁提交请设大一点");   
		echo tabledata("数据导入密码：|&lt;input name='back_pass' value='' type='password' size=10&gt;|导入和HTTP下载.php文件时的密码");   
		echo tabledata("确认导入密码：|&lt;input name='back_pass2' value='' type='password' size=10&gt;|不添默认为lvtao.net");
		echo tableend();
		echo "
		&lt;script language='JavaScript'&gt;
		function confirmit(){
			with(myform){
				if(back_pass.value!=back_pass2.value){
					alert('导入密码两次输入密码必须相同。');
					return false;
				}
			}
			return true;
		}
		myform.onsubmit=new Function('return confirmit();');
		&lt;/script&gt;
		&lt;input name='action' type='hidden' id='action' value='databackup'&gt;";
		fbutton('submit','dosubmit','下一步');
		fbutton('reset','doreset','重置');
		ffooter();
	}

	if($_POST['back_type']=="download"){//单文件下载选项
		fheader();
		echo tabletext("您选择了单文件导出方式，总数据量 $totalsize_chunk 字节。",500);
		echo tablestart("单文件导出：",500);
		echo tabledata("导出文件名：|&lt;input name='sqlfilename' value='$_POST[db_dbname](".date("Ymd").")_Mysql_txt.php' type='text' size='40'&gt;");
		echo tabledata("生成文件格式：|&lt;input name='extension' value='php' type='radio' checked&gt;.php");
		echo tableend();
		echo "&lt;input name='action' type='hidden' id='action' value='databackup'&gt;";
		fbutton('submit','dosubmit','导出');
		fbutton('reset','doreset','重置');
		ffooter();
	}
}

if($_POST['action']=="databackup"){

	function escape_string($str){
		$str=mysql_escape_string($str);
		$str=str_replace('\\\'','\'\'',$str);
		$str=str_replace("\\\\","\\\\\\\\",$str);
		$str=str_replace('$','\$',$str);
		return $str;
	}

	function sqldumptable($table,$tableid,$part=0) {
		if($part) global $lastcreate_temp,$current_size,$_POST;;

		//structure
		if($tableid&gt;=intval($_POST[nextcreate]) or $part==0){
			@mysql_query("SET SQL_QUOTE_SHOW_CREATE = 1");
			$query=mysql_query("SHOW CREATE TABLE `$table`");
			$row=mysql_fetch_row($query);
			$sql=str_replace("\n","\\n",str_replace("\"","\\\"",$row[1]));
			$sql=preg_replace("/^(CREATE\s+TABLE\s+`$table`)/mis","",$sql);
			$dumpstring="create(\"$table\",\"$sql\");\r\n\r\n";
			$_POST[nextcreate]++;
			dealdata($dumpstring);
			mysql_free_result($query);
		}		

		//data
		$query = mysql_query("SELECT count(*) as count FROM `$table` ");
		$count = mysql_fetch_array($query);
		$query = mysql_query("SELECT * FROM `$table` limit ".intval($_POST[lastinsert]).",$count[count] ");
		$numfields = mysql_num_fields($query);
		$dump_values = "";
		while ($row = mysql_fetch_row($query)) {
			$dump_values .= ($dump_values?",\r\n":"")."(";
			for ($i=0;$i&lt;$numfields;$i++) {
				if(stristr(mysql_field_flags($query,$i),"BINARY")){ //二进制处理
					$row[$i] = '\''."\".base64_decode('".base64_encode(addslashes($row[$i]))."').\"".'\'';
				}else if (!isset($row[$i]) or is_null($row[$i])) {
					$row[$i] = "NULL";
				}else {
					$row[$i] = '\''.escape_string($row[$i]).'\'';
				}
			}
			$dump_values .= implode(",",$row).")";
			$value_stop = 0;
			$value_len = strlen($dump_values);

			$_POST[lastinsert]++;

			if($value_len&gt;100000 || ($part &amp;&amp; $current_size+$value_len&gt;=intval($_POST["filesize"])*1024)){ //0.1M 左右
				$dumpstring = "insert(\"$dump_values\");\r\n\r\n";
				dealdata($dumpstring);
				$dump_values = "";
			}
		}
		if($dump_values){
			$dumpstring = "insert(\"$dump_values\");\r\n\r\n";
			dealdata($dumpstring);
		}
		mysql_free_result($query);
		
		//end of table
		$dumpstring = "tableend(\"$table\");\r\n\r\n";
		dealdata($dumpstring);
		$_POST[tabledumping]++;
		$_POST[lastinsert]=0;
	}

	function timeformat($time){
		return substr("0".floor($time/3600),-2).":".substr("0".floor(($time%3600)/60),-2).":".substr("0".floor($time%60),-2);
	}	
	function mysql_functions(){
		return '
		@mysql_connect($_POST[db_host],$_POST[db_username],$_POST[db_password]) or die("&lt;div id=pageendTag&gt;&lt;/div&gt;&lt;BR&gt;&lt;BR&gt;&lt;center&gt;不能连接服务器或连接超时！请返回检查您的配置。&lt;/center&gt; $showmywin0");
		if(!@mysql_select_db($_POST[db_dbname])){
			global $_POST;
			if(!$_POST[db_autocreate]){echo "&lt;div id=pageendTag&gt;&lt;/div&gt;&lt;BR&gt;&lt;BR&gt;&lt;center&gt;数据库[{$_POST[db_dbname]}]不存在！请返回检查您的配置。&lt;/center&gt; $showmywin0";exit;	}
			if(!mysql_query("CREATE DATABASE `$_POST[db_dbname]`")){echo "&lt;div id=pageendTag&gt;&lt;/div&gt;&lt;BR&gt;&lt;BR&gt;&lt;center&gt;数据库[{$_POST[db_dbname]}]不存在且自动创建失败！请返回检查您的配置。&lt;/center&gt; $showmywin0";exit;}
			mysql_select_db("$_POST[db_dbname]");
		}mysql_query("SET NAMES utf8;");
		function query($sql){
			global $_POST;
			if(!mysql_query($sql)){
				echo "&lt;BR&gt;&lt;BR&gt;&lt;font color=red&gt;MySQL语句错误！您可能发现了程序的BUG！&lt;a href=\"mailto:faisun@sina.com\"&gt;请报告开发者。&lt;/a&gt;
				  	&lt;BR&gt;版本：V'.VERSION.'&lt;BR&gt;语句：&lt;XMP&gt;$sql&lt;/XMP&gt;错误信息： ".mysql_error()." &lt;/font&gt;" ;
				if(trim($_POST[db_temptable])) query("DROP TABLE IF EXISTS `$_POST[db_temptable]`;");
				exit;
			}
		}
		function create($table,$sql){
			global $_POST;
			if(!trim($_POST[db_temptable])){
				do{
					$_POST[db_temptable]="_faisunsql".rand(100,10000);
				}while(@mysql_query("select * from `$_POST[db_temptable]`"));
			}
			query("CREATE TABLE `$_POST[db_temptable]` $sql");
			if(!$_POST[db_safttemptable]) query("DROP TABLE IF EXISTS `$table`;");
		}
		function insert($data){
			global $_POST;
			query("INSERT IGNORE INTO `$_POST[db_temptable]` VALUES $data;");
		}
		function tableend($table){
			global $_POST;
			if($_POST[db_safttemptable]) query("DROP TABLE IF EXISTS `$table`;");
			query("ALTER TABLE `$_POST[db_temptable]` RENAME `$table`");
		}';
	}
	
	function auto_submit_script(){
		return "echo \"&lt;script language='Javascript'&gt;
				try{finisheditem.focus();}catch(e){}
				function checkerror(frame){
					if(top.mainFrame1.location.href!=top.mainFrame2.location.href||(frame.document &amp;&amp; !frame.document.all.postingTag &amp;&amp; frame.document.all.pageendTag)){
						postingTag.innerHTML='MySQL:提交出现错误.正在自动&lt;a href=\'javascript:myform.submit();\'&gt;重新提交&lt;/a&gt;...';
						myform.submit();
					}
				}
				nextpgtimeout = parseFloat('\$_POST[nextpgtimeout]')?parseFloat('\$_POST[nextpgtimeout]'):0;
				if(top.myframeset&amp;&amp;this.window.name=='mainFrame1'){
					myform.target='mainFrame2';
					setInterval('checkerror(top.mainFrame2)',10000+1000*nextpgtimeout);
				}
				if(top.myframeset&amp;&amp;this.window.name=='mainFrame2'){
					myform.target='mainFrame1';
					setInterval('checkerror(top.mainFrame1)',10000+1000*nextpgtimeout);
				}
				setTimeout('myform.submit();',1000*nextpgtimeout);
				&lt;/script&gt;\";
		";
	}
	
	if($_POST[back_type]=="partsave"): ////////////////////////   Save Data ////////////////////////////

		if(!$_POST[tabledumping]) $_POST[tabledumping]=0; //正在导出的表
		if(!$_POST[nextcreate]) $_POST[nextcreate]=0; //待建立的表
		if(!$_POST[lastinsert]) $_POST[lastinsert]=0;
		if(!$_POST[page]) $_POST[page]=0;

		if(!is_dir("$_POST[dir]") and !@mkdir("$_POST[dir]",0777)){
			fheader();echo "&lt;BR&gt;&lt;BR&gt;&lt;center&gt;目录'$_POST[dir]'不存在且不能自动创建！请检查目录权限（权限为 777 方可写文件）。&lt;/center&gt;&lt;BR&gt;&lt;BR&gt;";ffooter();exit;
		}
		@chmod("$_POST[dir]",0777);

		//是否有多余的文件
		$dfileNo=0;
		$open=opendir($_POST["dir"]);
		$delhtml="";
		while($afilename=readdir($open) and !$_POST[filedeled]){
			$checked="";
			if(substr($afilename,0,strlen($_POST[filename]))==$_POST[filename]){
				$checked="checked";
			}
			if(is_file("$_POST[dir]/$afilename")){
				$delhtml.=tabledata("$afilename|".date("Y-m-d",filectime("$_POST[dir]/$afilename"))."|".num_bitunit(filesize("$_POST[dir]/$afilename"))."|&lt;center&gt;&lt;input name='dfile[$dfileNo]' type='checkbox' value='$_POST[dir]/$afilename' $checked&gt;&lt;/center&gt;");
				$dfileNo++;
			}
		}

		//多余文件处理
		if($dfileNo){
			$_POST[filedeled]=1;
			fheader();
			echo tabletext("'$_POST[dir]/'中以下文件已存在，它们可能被覆盖或成为额外的文件。&lt;br&gt;您可以有选择地删除它们或返回上一步重新设定：",500);
			echo tablestart("选择要删除的文件：",500);
			echo tabledata("&lt;strong&gt;文件名&lt;/strong&gt;|&lt;strong&gt;修改日期&lt;/strong&gt;|&lt;strong&gt;大小&lt;/strong&gt;|&lt;center&gt;&lt;strong&gt;反选&lt;/strong&gt;&lt;input type='checkbox' name='checkbox' value='' onclick='selrev();'&gt;&lt;/center&gt;","31%|32%|21%|16%");
			echo $delhtml;
			echo tableend();
			echo "
			&lt;script language='JavaScript'&gt;
			function selrev() {
				with(myform) {
					for(i=0;i&lt;elements.length;i++) {
						thiselm = elements[i];
						if(thiselm.name.match(/dfile\[\w+\]/))	thiselm.checked = !thiselm.checked;
					}
				}
			}
			&lt;/script&gt;";
			fbutton('submit','dosubmit','删除并继续');
			fbutton('reset','doreset','重置');
			fbutton('button','dogoback','返回修改','onclick=\'history.back();\'');
			ffooter();
			exit;
		}

		//删除多余文件
		if($_POST[filedeled]==1){
			for(@reset($_POST["dfile"]);@list($key,$val)=@each($_POST["dfile"]);){
				if($val) unlink($val);
			}
			unset($_POST["dfile"]);
		}
		$_POST[filedeled]=2;

		//开始导出前的预处理
		if($_POST[page]==0){
			if(!file_exists($_POST[dir]))mkdir($_POST[dir], 0777);
			$_POST[page]=1;
			if(is_writable($_POST[dir])){
			fheader();
			echo tablestart("目录权限正确");
			echo tabledata("&lt;br&gt;经测试，该目录可以写入文件。&lt;br&gt;&lt;br&gt;");
			echo tableend();
			fbutton('submit','dosubmit','开始自动导出');
			ffooter();
			exit;
			}
		}


		
		if(!$_POST["StartTime"]) $_POST["StartTime"]=time();

		$writefile_data = '';
		
		function writefile($data,$method='w'){
			global $fsqlzip,$_POST;;
			$file = "{$_POST[filename]}_pg{$_POST[page]}.php";
			$fp=fopen("$_POST[dir]/$file","$method");
			flock($fp,2);
			fwrite($fp,$data);
		}

		$current_size = 0;
		function dealdata($data){
			global $current_size,$tablearr,$writefile_data,$_POST;;
			$current_size += strlen($data);
			$writefile_data .= $data;
			if($current_size&gt;=intval($_POST["filesize"])*1024){
				$current_size=0;
				$writefile_data .= "\r\n?"."&gt;";

				writefile($writefile_data,"w");

				$_POST[page]=intval($_POST[page])+1;

				fheader();
				echo tablestart("正在从数据库'$_POST[db_dbname]'中导出数据……",500);

				$str1="&lt;br&gt;-= 以下数据表处理完成 =- &lt;div class='borderdiv' style='width:150px;height:100px;overflow:auto;' align=left&gt;";
				
				$finishByte=0;
				for(reset($tablearr);list($key,$val)=each($tablearr);){
					if($key&lt;$_POST[tabledumping]){
						$str1.="√ $val&lt;BR&gt;\r\n";
						$finishByte+=$_POST[fsqltable][$val];
					}else if($key==$_POST[tabledumping]){
						$str1.="&lt;a href='#' id='finisheditem'&gt; &lt;/a&gt;&lt;/div&gt;
						&lt;br&gt;-= 以下数据表正待处理 =-
						&lt;div class='borderdiv' style='width:150px;height:100px;overflow:auto;' align=left&gt;
						&lt;font style='color:#FF0000'&gt;→ $val&lt;/font&gt;&lt;br&gt;\r\n";
						$finishByte+=$_POST[lastinsert]*substr(strstr($_POST[fsqltable][$val],','),1);
						$finish=intval($finishByte/$_POST[totalsize]*100);						
					}else{
						$str1.="・ $val&lt;br&gt;\r\n";
					}
				}
				$str1.="&lt;/div&gt;&lt;BR&gt;";

				$str2=tablestart("导出状态",300);
				$str2.=tabledata("共有数据：|".num_bitunit($_POST[totalsize])."","100|200");
				$str2.=tabledata("现已导出：|".num_bitunit($finishByte)."");
				$str2.=tabledata("每页导出：|".num_bitunit(intval($finishByte/$_POST[page]))."");
				$str2.=tabledata("导出时间间隔：|$_POST[nextpgtimeout] 秒");
				$str2.=tabledata("每页生成数据文件|≥ ".num_bitunit($_POST["filesize"]*1024)."");
				$str2.=tabledata("已生成数据文件：|".($_POST[page]-1)." 个");
				$str2.=tabledata("正在自动进入：|&lt;a href='javascript:myform.submit();'&gt;第 $_POST[page] 页&lt;/a&gt;");
				$str2.=tabledata("已用时：|".timeformat(time()-$_POST["StartTime"])."");
				$str2.=tabledata("已完成：|{$finish}% ");
				$str2.=tabledata("完成进度：|&lt;table width=100% height=12  border=0 cellspacing=1 cellpadding=0 class='tabletitle' align=center&gt;&lt;tr&gt;&lt;td width='$finish%'&gt;&lt;div&gt;&lt;/div&gt;&lt;/td&gt;&lt;td width='".(100-$finish)."%'  class='tabledata'&gt;&lt;div&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;");
				$str2.=tableend();
				$str2.="&lt;B&gt;&lt;div id='postingTag'&gt;&lt;/div&gt;&lt;/B&gt;";
				echo tabledata("$str1|$str2");
				echo tableend();
				ffooter();
				eval(auto_submit_script());
				exit();
			}
		}


// 开始导出一页
$writefile_data = "&lt;?\r\nif(!defined('VERSION')){echo \"&lt;meta http-equiv=refresh content='0;URL={$_POST[filename]}.php'&gt;\";exit;}\r\n";

$tablearr=array();
for(@reset($_POST[fsqltable]);count($_POST[fsqltable])&amp;&amp;@list($key,$val)=@each($_POST[fsqltable]);) {
	$tablearr[]=$key;
}

for($i=$_POST[tabledumping];$i&lt;count($tablearr);$i++){
	sqldumptable($tablearr[$i],$i,1);  //导出表
}

//结束最后文件
$data="echo '&lt;center&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;完成。所有数据都已经导入数据库中。&lt;/center&gt;'; exit; ?"."&gt;";

$writefile_data .= "$data";
writefile($writefile_data,"w");
$backpassword=$_POST[back_pass]?$_POST[back_pass]:"lvtao.net";
		//引导文件内容
$data='&lt;?

$usedumppass=1;  //导入数据时是否使用导入密码。如果您忘记了导入密码，请把值改为 0 。HTTP方式下载数据文件不能取消导入密码。

define("VERSION","'.VERSION.'");
error_reporting(1);
@set_time_limit(0);
$md5pass="'.md5($backpassword).'";

'.requestValues().frameset_html().postvars_function().'?'.'&gt;&lt;html&gt;&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
&lt;title&gt;MySQL 数据库自导入程序&lt;/title&gt;'.csssetting().'&lt;/head&gt;
&lt;body link="#0000FF" vlink="#0000FF" alink="#0000FF"&gt;
&lt;center&gt;

&lt;script language="Javascript"&gt;document.doshowmywin=1;&lt;/script&gt;		
'.showmywin_script().'
&lt;?
$showmywin0=$_POST[loadpage]?"&lt;script language=Javascript&gt;document.doshowmywin=0;&lt;/script&gt;&lt;/body&gt;":"";
	if(!$_POST["action"] and !$_GET["action"]){
?'.'&gt;&lt;center&gt;&lt;form name="configform" method="post" action=""&gt;'.
tablestart('备份信息一览').
tabledata("共有数据量：|".num_bitunit($_POST[totalsize])."","50%|50%").
tabledata("共有数据表：|".count($_POST[table])).
tabledata("每页生成数据文件|≥ ".num_bitunit($_POST["filesize"]*1024)).
tabledata("数据文件数：|".$_POST[page]).
tabledata("文件总数：|".($_POST[page]+2)).
tabledata("备份时间：|".date("Y-m-d H:i")).
tabledata("原数据库版本：|".$_POST[mysql_version]).
tableend().
tablestart('导入数据库配置').
tabledata('服务器：|&lt;input name="db_host" value="'.$_POST[db_host].'" type="text"&gt;',"50%|50%").
tabledata('数据库：|&lt;input name="db_dbname" value="'.$_POST[db_dbname].'" type="text"&gt;').
tabledata('该数据库不存在时自动创建|&lt;input name="db_autocreate" value="1" type="checkbox" checked&gt;').
tabledata('用户名：|&lt;input name="db_username" value="root" type="text"&gt;').
tabledata('密　码：|&lt;input name="db_password" value="" type="password"&gt;').
tabledata('导入一页时间间隔：|&lt;input name="nextpgtimeout" value="'.$_POST[nextpgtimeout].'" type="text"&gt; 秒').
tabledata('导入密码：|&lt;input name="db_pass" value="" type="password"&gt;').
tabledata('安全的临时表(&lt;a href="javascript:alert(\'使用临时表插入完整无误的数据后再删除原表,要临时占用数据库空间.\');" title="帮助"&gt;?&lt;/a&gt;)：|&lt;input name="db_safttemptable" type="checkbox" id="db_safttemptable" value="yes" checked&gt;').
tableend().
fbutton('submit','action','导入','',1).
'&lt;/form&gt;
&lt;/center&gt;
&lt;?
exit;
}
if($usedumppass and md5($_POST[db_pass])!=$md5pass) die("&lt;div id=pageendTag&gt;&lt;/div&gt;导入密码不正确！如果您忘记了导入密码，请把本源文件开头的 \$usedumppass 的值改为 0 。 $showmywin0");
'.mysql_functions().'

$totalpage='.$_POST[page].';
if(!$_POST[loadpage]){$_POST[loadpage]=1;}
if($totalpage&gt;=$_POST[loadpage]){
include("'.$_POST[filename].'_pg$_POST[loadpage].php");
echo "&lt;center&gt;&lt;form name=myform method=\'post\' action=\'\'&gt;";
$_POST[loadpage]++;

echo "&lt;input type=\'hidden\' name=\'faisunsql_postvars\' value=\'".fsql_StrCode(serialize($_POST),"ENCODE")."\'&gt;
&lt;BR&gt;&lt;BR&gt;正在导入数据到数据库\'$_POST[db_dbname]\'……&lt;BR&gt;&lt;BR&gt;本页运行完成！ 正在自动进入&lt;a href=\'javascript:myform.submit();\'&gt;第 $_POST[loadpage] 页&lt;/a&gt;，共 $totalpage 页……
&lt;BR&gt;&lt;BR&gt;(除非进程长久不动，否则请不要点击以上页码链接。)";
?'.'&gt;
&lt;BR&gt;&lt;BR&gt;&lt;B&gt;&lt;div id="postingTag"&gt;&lt;/div&gt;&lt;/B&gt;
&lt;? '.auto_submit_script().' ?'.'&gt;
&lt;div id="pageendTag"&gt;&lt;/div&gt;
&lt;/form&gt;&lt;/center&gt;&lt;?php }else{echo "&lt;center&gt;完成导入数据到数据库\'$_POST[db_dbname]\'&lt;/center&gt;";}?&gt;
&lt;/body&gt;&lt;/html&gt;';

		//写入引导文件
		if(isset($fsqlzip)){
			$fsqlzip-&gt;addfile($data,"$_POST[filename].php","$fsqlzip-&gt;gzfilename.tmp");
			rename("$fsqlzip-&gt;gzfilename.tmp","$fsqlzip-&gt;gzfilename");
		}else{
			$file="$_POST[dir]/$_POST[filename].php";
			$fp=fopen($file,"w");
			flock($fp,2);
			fwrite($fp,$data);
			fclose($fp);
		}

		//提示导出完成
		fheader();
		echo tabletext("&lt;BR&gt;&lt;BR&gt;全部完成，用时 ".timeformat(time()-$_POST["StartTime"])." 。
		&lt;BR&gt;&lt;BR&gt;数据库'$_POST[db_dbname]'已全部保存到文件夹'$_POST[dir]'中，共 ".intval($_POST[page])." 页，".(intval($_POST[page])+2)." 个文件。
		&lt;BR&gt;&lt;BR&gt;将此文件夹置于服务器可访问目录，并运行'$_POST[filename].php'即可将数据导入。&gt;
		或在&lt;a href='$_POST[dir]/{$_POST[filename]}.php' target='_blank'&gt;&lt;H3&gt;运行备份文件 {$_POST[filename]}.php &lt;/H3&gt;&lt;/a&gt;时也会出现此链接。
		&lt;BR&gt;&lt;BR&gt;",500);
		echo "&lt;div id='postingTag'&gt;&lt;/div&gt;";
		ffooter();
		exit;
	endif;
}
?&gt;</pre>
<p></p></div>
            <div class="tag">标签:	<a href="http://www.lvtao.net/tag/php" rel="tag">php</a>	<a href="http://www.lvtao.net/tag/mysql" rel="tag">mysql</a></div>
            </article>
                        <div class="nextlog">        <strong>上一篇：</strong> <a href="http://www.lvtao.net/ios/Objective-C-2.html">objective-c基础教程之数据类型及循环的使用</a>
            <br>
            <strong>下一篇：</strong> <a href="http://www.lvtao.net/tool/distinguish-vps-xen-openvz-hvm.html">如何识别linuxVPS是基于哪种虚拟技术OpenVZ/XEN</a>
    </div>
                                <div class="page_navi clearfix">
        </div>
                <div id="comment-place">
    <div class="comment-post" id="comment-post">
        <div class="cancel-reply" id="cancel-reply" style="display:none"><a href="javascript:void(0);" onclick="cancelReply()">取消回复</a></div>
        <p class="comment-header"><b>发表评论：</b><a name="respond"></a></p>
        <form method="post" name="commentform" action="http://www.lvtao.net/index.php?action=addcom" id="commentform">
            <input type="hidden" name="gid" value="160">
                        <p>
                <input type="text" name="comname" maxlength="49" class="input" value="" size="22" tabindex="1">
                <label for="author"><small>名字</small></label>
            </p>
            <p>
                <input type="text" name="commail" maxlength="128" class="input" value="" size="22" tabindex="2">
                <label for="email"><small>邮箱</small></label>
            </p>
            <p>
                <input type="text" name="comurl" maxlength="128" class="input" value="" size="22" tabindex="3">
                <label for="url"><small>主页</small></label>
            </p>
                        <p><textarea name="comment" class="textarea" rows="5" tabindex="4"></textarea></p>
            <p><img src="http://www.lvtao.net/include/lib/checkcode.php" align="absmiddle"><input name="imgcode" type="text" class="input" size="5" tabindex="5"><input type="submit" id="comment_submit" value="发布" tabindex="4">
            </p>
            <input type="hidden" name="pid" id="comment-pid" value="0" size="22" tabindex="1">
        </form>
    </div>
    </div>
        </dl>
</div></section>
<div id="link">
    <strong>+友情链接 <span style="font-weight:100;">(个人技术博客,接受PR&gt;=3且有收录同类正规站点. 链接申请请发邮件:admin@lvtao.net.不符合要求的链接将予删除.敬请谅解)</span></strong>
    <p><a href="http://www.lvtao.net/" title="吕滔博客主页" target="_blank">吕滔博客</a><a href="http://www.sunhui.org/" title="" target="_blank">孙辉博客</a><a href="http://jinzhe.net/" title="" target="_blank">金哲博客</a><a href="http://www.binghe.org/" title="" target="_blank">冰河的博客</a><a href="http://www.veryide.com/" title="" target="_blank">VeryIDE</a><a href="http://www.wglong.com/main/index" title="" target="_blank">Warren</a><a href="http://anerg.com/" title="" target="_blank">废墟</a><a href="http://quke.org/" title="" target="_blank">趣客</a><a href="http://www.actphp.com/" title="" target="_blank">LAMP技术门户</a><a href="http://www.shagua.name/" title="" target="_blank">傻瓜博客</a><a href="http://www.xenme.com/" title="" target="_blank">xenme</a><a href="http://www.gaojinbo.com/" title="" target="_blank">高进波博客</a><a href="http://www.lvtao.net/book/memcached.html" title="" target="_blank">Memcached</a><a href="http://www.lvtao.net/book/node.js.htm" title="" target="_blank">七天学会NodeJS</a><a href="http://www.lvtao.net/book/php_safe.htm" title="" target="_blank">剖析PHP安全漏洞</a><a href="http://www.jwzzsw.com/" title="" target="_blank">辉之思悟</a><a href="http://www.zhangshiju.com/" title="" target="_blank">个人网站制作</a><a href="http://opkeep.com/" title="" target="_blank">运维人生</a><a href="http://www.centos.bz/" title="" target="_blank">centos</a><a href="http://www.yahei.net/" title="" target="_blank">雅黑实验室</a><a href="http://www.asymt.com/" title="" target="_blank">喻名堂博客</a><a href="http://www.shellsec.com/" title="" target="_blank">神刀网</a><a href="http://50vip.com/" title="" target="_blank">红色石头</a><a href="http://www.liutian.org/" title="" target="_blank">刘田博客</a><a href="http://www.lvtao.net/book/AdvancedSQLInjectionWithMySQL.htm" title="" target="_blank">MySQL注入</a><a href="http://www.rugaobbs.com/" title="" target="_blank">如皋论坛</a><a href="http://www.hackhp.com/" title="" target="_blank">Hackhp Blog</a><a href="http://www.qianbaihui.org/" title="" target="_blank">千百惠女装官网</a><a href="http://www.lvtao.net/tool/html5/" title="" target="_blank">HTML5元素周期表</a><a href="http://www.ttlsa.com/" title="" target="_blank">运维生存时间</a><a href="http://www.lvtao.net/book/awk.html" title="" target="_blank">Awk学习笔记</a><a href="http://www.klfy.net/" title="" target="_blank">快乐飞扬</a><a href="http://www.lvtao.net/book/regex.htm" title="" target="_blank">30分钟学会正则表达式</a><a href="http://www.lvtao.net/book/zeptojs.html" title="" target="_blank">zeptojs</a><a href="http://www.chenhanquan.cn/" title="" target="_blank">陈汉泉</a><a href="http://cuiqingcai.com/" title="" target="_blank">静觅</a><a href="http://www.bdtool.net/" title="" target="_blank">BD工具网</a><a href="http://www.phpyun.com/" title="" target="_blank">PHP云人才系统</a><a href="http://secsky.sinaapp.com/" title="" target="_blank">安全天空</a><a href="http://www.icnws.com/" title="" target="_blank">城南往事</a><a href="http://www.qiancaobailu.org/" title="" target="_blank">仟草佰露官网</a><a href="http://www.ygza.com/" title="" target="_blank">欧普照明官网</a><a href="http://www.ibojue.com/" title="" target="_blank">帛爵皮衣</a><a href="http://www.ebaozi.com/" title="" target="_blank">宝姿官方旗舰店</a><a href="http://www.youxian888.com/wp/category/chifa/" title="" target="_blank">玛咖的功效</a><a href="http://www.lvtao.net/book/redis.htm" title="" target="_blank">redis中文手册</a><a href="http://www.initphp.com/" title="" target="_blank">InitPHP框架</a><a href="http://blog.it985.com/" title="" target="_blank">IT985博客</a><a href="http://www.jiaai.org/" title="" target="_blank">家爱</a></p>
    <table><tbody><tr><td><a href="http://www.chuangen.com/?lvtao.net" target="_blank" rel="nofollow"><img src="./PHP单文件版MySQL超大数据库分卷备份恢复工具_files/cceit.jpg"></a></td><td><a href="http://www.alexa.com/siteinfo/lvtao.net" target="_blank" rel="nofollow"><a href="http://www.alexa.com/data/details/main?url=http://lvtao.net" class="AlexaSiteStatsWidget"><img src="./PHP单文件版MySQL超大数据库分卷备份恢复工具_files/s.gif" border="0" alt="Alexa Certified Site Stats for lvtao.net"></a><script type="text/javascript" src="./PHP单文件版MySQL超大数据库分卷备份恢复工具_files/a"></script></a></td></tr></tbody></table>
</div>
</div><footer><div id="footer">

    <span><a href="http://www.lvtao.net/sitemap.xml" rel="sitemap">SiteMAP</a> <a href="http://www.miibeian.gov.cn/" target="_blank" rel="nofollow">鄂ICP备11012523号</a>  <a href="http://www.aliyun.com/cps/rebate?from_uid=t/Svud2BQAg=" target="_blank" rel="nofollow">阿里云</a> <a href="http://www.emlog.net/templates/author-139" target="_blank" rel="nofollow">EMLOG</a>驱动</span>Copyright ©&nbsp;2007-2013 <a href="http://www.lvtao.net/">吕滔个人主页</a> All rights reserved.

</div></footer>



<div style="display:none"><script src="./PHP单文件版MySQL超大数据库分卷备份恢复工具_files/stat.php" language="JavaScript"></script><script src="./PHP单文件版MySQL超大数据库分卷备份恢复工具_files/core.php" charset="utf-8" type="text/javascript"></script><script src="./PHP单文件版MySQL超大数据库分卷备份恢复工具_files/online_v3.php" charset="utf-8" type="text/javascript"></script><a href="http://www.cnzz.com/stat/website.php?web_id=2109427" target="_blank">站长统计</a></div></body></html>